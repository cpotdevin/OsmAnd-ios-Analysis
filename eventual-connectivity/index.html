<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Eventual Connectivity・Wire iOS and Android App Analysis</title>
    <link rel="stylesheet" type="text/css" href="/typesafe.css" />
    <link rel="stylesheet" type="text/css" href="/index.css" />
</head>

<body>

    <p><a href="/index.html">Home</a></p>
    <h1>Eventual Connectivity・Wire iOS and Android App Analysis</h1>

    <p>
            Wire has a NetworkStatus folder where constantly verifies the internet connection. In the case that there is no internet connection available a banner is shown at the top of the screen. Also, when the user tries to send a message Wire has a label where tells the user that the messaging it’s trying to be sent. After some time Wire shows two possible actions to be done: Resend the message or delete it. This is helpful to the user because it tells him that Wire tried to send it but it was not possible.  Finally, when the bar is touched it appears a message telling the user a better description of the current network state. All these messages and alerts are shown below: 
    </p>

    <img src="../resources/images/EC-Introduction1.PNG" alt="EC-Introduction1">
    <img src="../resources/images/EC-Introduction2.PNG" alt="EC-Introduction2">
    <img src="../resources/images/EC-Introduction3.PNG" alt="EC-Introduction3">
    <img src="../resources/images/EC-Introduction4.PNG" alt="EC-Introduction4">
    <img src="../resources/images/EC-Introduction5.PNG" alt="EC-Introduction5">

    <p>
        For this Wire has a View and a Controller, following the MVC of iOS, just avoiding the Model. In the first one Wire changes all the constraints and manages the Offline Bar if this has to be shown. The desition of what to do, which message to show and when is took by the Controller. Wire has all the code related to this in a folder to easily do find it and do changes. 
    </p>

    <img src="../resources/images/EC-Folder.png" alt="EC-Folder">

    <p>
        Wire establish 3 different types of connection (Or non-connections) as a state. The first one is online, which is the desire and normal type of connection. When this case is the current one the offline bar is hidden. When one of the other two types is the current one the offline bar appears and shows a message according to the type of non-connection. Wire manages the state in an enum as shown below:
    </p>

    <img src="../resources/images/EC-1.png" alt="EC-1">

    <p>
        The message can be resent and the red button of “resend” is shown. To do this there is a full pipeline of calls that start calling the following method, on “MessageToolboxView” class, when the user taps that button:
    </p>

    <img src="../resources/images/EC-2.png" alt="EC-2">

    <p>This call the following method:</p>

    <img src="../resources/images/EC-3.png" alt="EC-3">

    <p>As shown, it calls perform method with the action “.resend”. This is also called via Objective-C:</p>

    <img src="../resources/images/EC-4.png" alt="EC-4">

    <p>There are different actions that can be performed. Wire established an enum to list them:</p>

    <img src="../resources/images/EC-5.png" alt="EC-5">

    <p>To check it if the message can be resent there is a variable that stored this property:</p>

    <img src="../resources/images/EC-6.png" alt="EC-6">

    <p>
        In the “reloadContent” method, in the “MessageToolboxView” class, some cases are considered depending of what it’s is going to be painted. In the case of failure to send the message this happens: 
    </p>

    <img src="../resources/images/EC-7.png" alt="EC-7">

    <p>
        This method just shows the red “resend” button and hides the others. The content that can be displayed it’s set by the following enum:
    </p>

    <img src="../resources/images/EC-8.png" alt="EC-8">

    <p>Finally, the code that establishes all the style of the “resend” button is the following:</p>

    <img src="../resources/images/EC-9.png" alt="EC-9">

    <p>It’s important to clarify that Wire does the same process without taking care of the type of message that failed to send.</p>
</body>

</html>